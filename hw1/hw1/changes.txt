something weird in the allocation of bg and fg and update